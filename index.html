<!doctype html>
<html lang="uk">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è</title>
  <style>
    :root {
      /* –ü–∞–ª—ñ—Ç—Ä–∞: –Ω—ñ–∂–Ω—ñ –∫—Ä–µ–º–æ–≤—ñ + —à–æ–∫–æ–ª–∞–¥ */
      --bg: #ffffff;
      --cream: #fff7ef;
      --latte: #f7e7d8;
      --cocoa: #7b4b3a;
      --cocoa-mid: #a06b55;
      --cocoa-light: #c79275;
      --text: #3b2a23;
      --muted: #7c6d66;
      --chip: #ffffffcc;
      --chip-brd: #00000014;
      --btn-text: #fffdfb;
      --shadow: 0 12px 40px rgba(101, 74, 60, .18);
      --accent: #ffede1;
      --accent2: #ffe3d1;
      --glow: rgba(160, 107, 85, .35)
    }

    * {
      box-sizing: border-box
    }

    html,
    body {
      height: 100%
    }

    body {
      margin: 0;
      color: var(--text);
      font: 16px/1.55 Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      background:
        radial-gradient(1200px 800px at 20% 0%, var(--cream), transparent 60%),
        radial-gradient(900px 900px at 100% 100%, var(--latte), transparent 60%),
        linear-gradient(180deg, #fff, #fff);
      overflow: hidden;
      perspective: 1200px;
    }

    body::before {
      content: "";
      position: fixed;
      inset: -10%;
      background: conic-gradient(from 0deg at 50% 50%, #fff, var(--cream), #fff, var(--latte), #fff);
      filter: blur(80px) saturate(120%);
      opacity: .45;
      animation: swirl 80s linear infinite;
      pointer-events: none
    }

    @keyframes swirl {
      to {
        transform: rotate(360deg)
      }
    }

    .wave {
      position: fixed;
      left: -10vw;
      right: -10vw;
      height: 30vmax;
      border-radius: 50%;
      background:
        radial-gradient(120vmax 40vmax at 50% 40%, rgba(160, 107, 85, .10), transparent 60%),
        radial-gradient(90vmax 30vmax at 60% 80%, rgba(199, 146, 117, .10), transparent 60%);
      filter: blur(20px);
      pointer-events: none;
    }

    .wave.w1 {
      top: -12vmax;
      animation: float1 18s ease-in-out infinite
    }

    .wave.w2 {
      bottom: -16vmax;
      animation: float2 22s ease-in-out infinite
    }

    @keyframes float1 {

      0%,
      100% {
        transform: translateY(0)
      }

      50% {
        transform: translateY(1.2vmax)
      }
    }

    @keyframes float2 {

      0%,
      100% {
        transform: translateY(0)
      }

      50% {
        transform: translateY(-1.4vmax)
      }
    }

    .spark {
      position: fixed;
      inset: 0;
      pointer-events: none;
      mix-blend-mode: soft-light
    }

    .wrap {
      position: relative;
      height: 100%;
      display: grid;
      place-items: center;
      padding: 28px
    }

    .card {
      width: min(780px, 92vw);
      background: #ffffffcc;
      backdrop-filter: blur(14px) saturate(120%);
      border: 1px solid var(--chip-brd);
      border-radius: 24px;
      padding: 28px clamp(18px, 5vw, 36px);
      box-shadow: var(--shadow);
      transform-style: preserve-3d;
      transition: transform .15s ease, box-shadow .2s ease
    }

    .card:hover {
      box-shadow: 0 18px 54px var(--glow)
    }

    .heading {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: .9rem
    }

    .ttl {
      display: flex;
      gap: .9rem;
      align-items: center
    }

    .logo {
      width: 48px;
      height: 48px;
      border-radius: 14px;
      background:
        radial-gradient(circle at 35% 30%, #fff2e6, transparent 50%),
        radial-gradient(circle at 65% 70%, #fde5d1, transparent 55%),
        linear-gradient(135deg, var(--cocoa-mid), var(--cocoa-light));
      box-shadow: inset 0 0 0 1px #ffffff88, 0 6px 16px rgba(160, 107, 85, .25);
    }

    h1 {
      margin: 0;
      font-weight: 800;
      letter-spacing: .2px
    }

    .subtitle {
      color: var(--muted);
      margin-top: .25rem
    }

    .actions {
      display: flex;
      gap: .6rem;
      align-items: center
    }

    .iconbtn {
      display: inline-grid;
      place-items: center;
      width: 40px;
      height: 40px;
      border-radius: 12px;
      border: 1px solid var(--chip-brd);
      background: var(--chip);
      cursor: pointer;
      transition: transform .12s ease, box-shadow .12s ease, filter .12s ease
    }

    .iconbtn:hover {
      transform: translateY(-1px)
    }

    .iconbtn:active {
      transform: translateY(0)
    }

    .btn {
      position: relative;
      margin-top: 18px;
      display: inline-flex;
      align-items: center;
      gap: .65rem;
      padding: 14px 20px;
      border-radius: 16px;
      border: none;
      cursor: pointer;
      color: var(--btn-text);
      font-weight: 800;
      letter-spacing: .2px;
      background: linear-gradient(135deg, var(--cocoa-mid), var(--cocoa));
      box-shadow: 0 10px 28px rgba(123, 75, 58, .28), inset 0 -2px 0 rgba(0, 0, 0, .08);
      transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
      overflow: hidden
    }

    .btn:hover {
      box-shadow: 0 16px 40px rgba(123, 75, 58, .35);
      filter: saturate(108%)
    }

    .btn:active {
      transform: translateY(1px) scale(.99)
    }

    .btn .ripple {
      position: absolute;
      inset: 0;
      opacity: 0;
      pointer-events: none;
      mix-blend-mode: soft-light;
      background: radial-gradient(160px 160px at var(--x, 50%) var(--y, 50%), rgba(255, 255, 255, .65), transparent 40%);
      transition: opacity .25s ease
    }

    .btn:hover .ripple {
      opacity: 1
    }

    .fortune {
      margin-top: 18px;
      min-height: 3lh;
      font-size: clamp(20px, 3.4vw, 28px);
      white-space: pre-wrap
    }

    .fortune.revealed {
      animation: pop .6s ease
    }

    @keyframes pop {
      0% {
        transform: scale(.985);
        opacity: .2
      }

      60% {
        transform: scale(1.03);
        opacity: 1
      }

      100% {
        transform: scale(1)
      }
    }

    .info {
      margin-top: 10px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      color: var(--muted);
      font-size: .95rem
    }

    .chip {
      display: inline-flex;
      align-items: center;
      gap: .45rem;
      padding: 8px 12px;
      border-radius: 999px;
      background: var(--chip);
      border: 1px solid var(--chip-brd)
    }

    .dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #53b164;
      box-shadow: 0 0 10px #53b16477
    }

    .dot.wait {
      background: #d26b6b;
      box-shadow: 0 0 10px #d26b6b77
    }

    .toast {
      position: fixed;
      left: 50%;
      bottom: 22px;
      transform: translateX(-50%) translateY(20px);
      background: #fff;
      color: var(--text);
      border: 1px solid var(--chip-brd);
      padding: 10px 14px;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, .08);
      opacity: 0;
      pointer-events: none;
      transition: .25s ease;
      max-width: 92vw
    }

    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0)
    }

    .modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, .25)
    }

    .modal.show {
      display: flex
    }

    .dialog {
      width: min(420px, 92vw);
      background: #fff;
      border: 1px solid var(--chip-brd);
      border-radius: 16px;
      padding: 16px 16px 14px;
      box-shadow: 0 12px 40px rgba(0, 0, 0, .18)
    }

    .dialog h3 {
      margin: 0 0 8px 0
    }

    .fld {
      display: flex;
      gap: .5rem
    }

    .fld input {
      flex: 1;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid var(--chip-brd);
      font: inherit
    }

    .row {
      display: flex;
      gap: .6rem;
      margin-top: 10px
    }

    .sec {
      font-size: .9rem;
      color: var(--muted)
    }

    canvas#fx {
      position: fixed;
      inset: 0;
      pointer-events: none
    }
  </style>
</head>

<body>
  <div class="wave w1" aria-hidden="true"></div>
  <div class="wave w2" aria-hidden="true"></div>
  <canvas id="fx"></canvas>
  <canvas id="spark" class="spark"></canvas>

  <div class="wrap">
    <div class="card" id="card" role="main" aria-live="polite">
      <div class="heading">
        <div class="ttl">
          <div>
            <h1>–î–ª—è –ù–∞—Ç–∞–ª—ñ—ó</h1>
            <div class="subtitle">–ê—Ä—Ç–µ–º –ø–æ—Å—Ç–∞—Ä–∞–≤—Å—è, —â–æ–± —Ç–∏ –∑–∞–≤–∂–¥–∏ –º–∞–ª–∞ –¥–æ—Å—Ç—É–ø –¥–æ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω—å ‚ú®</div>
          </div>
        </div>
        <div class="actions">
          <button class="iconbtn" id="lockBtn" title="–í–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å" aria-label="–í–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M7 10V8a5 5 0 0 1 10 0v2" stroke="#804f3f" stroke-width="2" stroke-linecap="round" />
              <rect x="4" y="10" width="16" height="10" rx="2" stroke="#804f3f" stroke-width="2" />
              <circle cx="12" cy="15" r="1.6" fill="#804f3f" />
            </svg>
          </button>
          <button class="iconbtn" id="copyBtn" title="–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –∑—ñ–∑–Ω–∞–Ω–Ω—è" aria-label="–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –∑—ñ–∑–Ω–∞–Ω–Ω—è">üìã</button>
        </div>
      </div>

      <button class="btn" id="btn">–û—Ç—Ä–∏–º–∞—Ç–∏ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è <span class="ripple"></span></button>
      <div class="fortune" id="fortune" aria-label="–¢–µ–∫—Å—Ç –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è"></div>

      <div class="info">
        <div class="chip"><span class="dot" id="statusDot"></span><span id="statusText">–ó–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ</span></div>
        <div class="chip">–ù–∞—Å—Ç—É–ø–Ω–µ: <span id="nextTime" style="margin-left:.35rem">‚Äî</span></div>
        <div class="chip" id="modeChip" title="–°—Ç–∞—Ç—É—Å">–†–µ–∂–∏–º: –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ</div>
        <div class="chip" id="count_message" title="–°–∫—ñ–ª—å–∫–∏ –∑–∞–ª–∏—à–∏–ª–æ—Å—å">–ó–∞–ª–∏—à–∏–ª–æ—Å—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å: 0</div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <!-- –ú–æ–¥–∞–ª –ø–∞—Ä–æ–ª—é -->
  <div class="modal" id="passModal" aria-hidden="true">
    <div class="dialog" role="dialog" aria-modal="true" aria-labelledby="dlgTitle">
      <h3 id="dlgTitle">–°–µ–∫—Ä–µ—Ç–Ω—ñ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è</h3>
      <div class="sec">–í–≤–µ–¥–∏ –ø–∞—Ä–æ–ª—å, —â–æ–± —Ä–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è.</div>
      <div class="fld" style="margin-top:10px">
        <input id="passInput" type="password" placeholder="–ü–∞—Ä–æ–ª—å" />
      </div>
      <div class="row">
        <button class="btn" id="passOk">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏<span class="ripple"></span></button>
        <button class="iconbtn" id="passCancel" title="–°–∫–∞—Å—É–≤–∞—Ç–∏" aria-label="–°–∫–∞—Å—É–≤–∞—Ç–∏">‚úï</button>
      </div>
    </div>
  </div>

  <script>
    (() => {
      const BTN = document.getElementById('btn');
      const FORTUNE = document.getElementById('fortune');
      const countEl = document.getElementById('count_message');
      const TOAST = document.getElementById('toast');
      const DOT = document.getElementById('statusDot');
      const STATUS = document.getElementById('statusText');
      const NEXT = document.getElementById('nextTime');
      const FX = document.getElementById('fx');
      const SP = document.getElementById('spark');
      const lockBtn = document.getElementById('lockBtn');
      const copyBtn = document.getElementById('copyBtn');
      const modal = document.getElementById('passModal');
      const passInput = document.getElementById('passInput');
      const passOk = document.getElementById('passOk');
      const passCancel = document.getElementById('passCancel');
      const modeChip = document.getElementById('modeChip');

      const ctx = FX.getContext('2d');
      const spx = SP.getContext('2d');

      const PRED_MIX = [
        // –Ω–µ—Å–ø–æ–¥—ñ–≤–∞–Ω–∞ –∑—É—Å—Ç—Ä—ñ—á
        "–î–µ–Ω—å —Ç–∏—Ö–æ –≥–æ—Ç—É—î –º–∞–ª–µ–Ω—å–∫–µ ¬´–æ, —Ç–∏ —Ç—É—Ç?¬ª",
        "–ú–∞—Ä—à—Ä—É—Ç–∏ —Ä–∞–ø—Ç–æ–º —Å—Ç–∞–Ω—É—Ç—å –±–ª–∏–∂—á–∏–º–∏, –Ω—ñ–∂ –∑–¥–∞—î—Ç—å—Å—è.",
        "–ü–∞—É–∑–∞ –º—ñ–∂ —Å–ø—Ä–∞–≤–∞–º–∏ –Ω–∞—à–µ–ø–æ—á–µ –ø—Ä–æ –ø—Ä–∏—Å—É—Ç–Ω—ñ—Å—Ç—å.",
        "–ß–∞—Å —Å—å–æ–≥–æ–¥–Ω—ñ –∑—Ä–æ–±–∏—Ç—å –≤–∏–≥–∏–Ω –Ω–∞ —Ç–≤–æ—é –∫–æ—Ä–∏—Å—Ç—å.",
        "–ó–Ω–∞–π–æ–º–∏–π –ø–æ–≥–ª—è–¥ –∑‚Äô—è–≤–∏—Ç—å—Å—è –±–µ–∑ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è.",
        "–ö–∞–ª–µ–Ω–¥–∞—Ä –∑–∞–ª–∏—à–∏—Ç—å –ø–æ—Ä–æ–∂–Ω—ñ–π —Ä—è–¥–æ–∫ –¥–ª—è —Å—é—Ä–ø—Ä–∏–∑—É.",
        "–ú—ñ—Å—Ç–æ —Å—Ç–∞–Ω–µ –∑–∞—Ç—ñ—Å–Ω–∏–º –¥–ª—è –≤—ñ–¥—Å—Ç–∞–Ω–µ–π.",
        "–í–∏–ø–∞–¥–æ–∫ –≤–∏–≥–ª—è–¥–∞—î –º–∞–π–∂–µ —è–∫ –ø–ª–∞–Ω.",

        "–í–∞—à—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–∏—Ö–∞—é—Ç—å –≤ –æ–¥–∏–Ω —Ä–∏—Ç–º.",
        "–¢–≤–æ—î ¬´–ø—Ä–∏–≤—ñ—Ç¬ª –¥–ª—è –Ω—å–æ–≥–æ –∑–≤—É—á–∏—Ç—å —è–∫ ¬´—è —Ç—É—Ç –ø–æ—Ä—É—á¬ª.",
        "–í–∏ –æ–¥–Ω–æ—á–∞—Å–Ω–æ —Å—Ç–∞–≤–∏—Ç–µ –æ–¥–Ω–∞–∫–æ–≤—ñ —Å–º–∞–π–ª–∏–∫–∏ ‚Äî —Å–µ—Ä—Ü—è –¥–æ–º–æ–≤–∏–ª–∏—Å—è —Ä–∞–Ω—ñ—à–µ.",
        "–ô–æ–º—É —Å—Ç–∞—î —Å–ø–æ–∫—ñ–π–Ω–æ –ø—ñ—Å–ª—è —Ç–≤–æ–≥–æ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ ¬´–æ–∫¬ª.",
        "–í–∞—à—ñ –ø–∞—É–∑–∏ –∑–∞—Ç–∏—à–Ω—ñ, —è–∫ —Å–ø—ñ–ª—å–Ω–∞ —Ç–∏—à–∞ –ø—ñ–¥ –ø–ª–µ–¥–æ–º.",
        "–í—ñ–Ω –ø–µ—Ä–µ—á–∏—Ç—É—î —Ç–≤–æ—ó —Ä—è–¥–∫–∏, –Ω—ñ–±–∏ –≥—Ä—ñ—î —Ä—É–∫–∏ –±—ñ–ª—è –≤–æ–≥–Ω—é.",
        "–¢–≤–æ—î —ñ–º‚Äô—è –¥–ª—è –Ω—å–æ–≥–æ ‚Äî –º—ñ—Å—Ü–µ —Å–∏–ª–∏.",
        "–í–∏ –ª–æ–≤–∏—Ç–µ –æ–¥–Ω—É —ñ —Ç—É –∂ –¥—É–º–∫—É —Ä—ñ–∑–Ω–∏–º–∏ —Å–ª–æ–≤–∞–º–∏.",
        "–¢–≤–æ—î ¬´—è —Ç—É—Ç¬ª –∑–Ω—ñ–º–∞—î –∑ –Ω—å–æ–≥–æ –ø–æ–ª–æ–≤–∏–Ω—É —Ç—Ä–∏–≤–æ–≥.",
        "–í–∞—à –≥—É–º–æ—Ä –∑–Ω–∞—î –¥–æ—Ä–æ–≥—É –±–µ–∑ –Ω–∞–≤—ñ–≥–∞—Ç–æ—Ä–∞.",
        "–¢–∏ –ø–æ–º—ñ—á–∞—î—à –¥—Ä—ñ–±–Ω–∏—Ü—ñ ‚Äî —ñ –≤—ñ–Ω –ø–æ–º—ñ—á–∞—î —Ç–µ–±–µ –≤ –∫–æ–∂–Ω—ñ–π –¥—Ä—ñ–±–Ω–∏—Ü—ñ.",
        "–í–∞—à—ñ ¬´–¥–æ–±—Ä–∞–Ω—ñ—á¬ª —Å—Ö–æ–∂—ñ –Ω–∞ –æ–±—ñ–π–º–∏ –∑ –ª—ñ—Ç–µ—Ä.",
        "–ù–∞–≤—ñ—Ç—å –∫–æ—Ä–æ—Ç–∫–µ ¬´–¥—è–∫—É—é¬ª –≤—ñ–¥ —Ç–µ–±–µ –∑–≤—É—á–∏—Ç—å –¥–ª—è –Ω—å–æ–≥–æ, —è–∫ –º—É–∑–∏–∫–∞.",
        "–í–∏ –æ–±–∏—Ä–∞—î—Ç–µ –æ–¥–Ω–∞–∫–æ–≤—ñ —Å–ª–æ–≤–∞, –Ω—ñ–±–∏ —Ä–µ–ø–µ—Ç–∏—Ä—É–≤–∞–ª–∏.",
        "–ô–æ–º—É —Ö–æ—á–µ—Ç—å—Å—è –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –¥–æ–≤—à–µ, –Ω—ñ–∂ –ø–ª–∞–Ω—É–≤–∞–≤.",
        "–í–∞—à—ñ –¥—ñ–∞–ª–æ–≥–∏ –∑–∞–ª–∏—à–∞—é—Ç—å –ø—ñ—Å–ª—è—Å–º–∞–∫ —Ç–µ–ø–ª–∞.",
        "–¢–∏ –¥–ª—è –Ω—å–æ–≥–æ ‚Äî –ø—Ä–∏—á–∏–Ω–∞ –Ω–∞–ø–∏—Å–∞—Ç–∏ –±–µ–∑ –ø—Ä–∏–≤–æ–¥—É.",
        "–í–∞—à—ñ —Ç–µ–º–∏ –Ω–µ –∑–∞–∫—ñ–Ω—á—É—é—Ç—å—Å—è, –ø—Ä–æ—Å—Ç–æ —Ä–æ–±–ª—è—Ç—å –ø–∞—É–∑—É.",
        "–ö–æ–ª–∏ —Ç–∏ —Å–º—ñ—î—à—Å—è –µ–º–æ–¥–∑—ñ ‚Äî —É –Ω—å–æ–≥–æ —Å–ø—Ä–∞–≤–¥—ñ –∫—Ä–∞—â–∞—î –Ω–∞—Å—Ç—Ä—ñ–π.",
        "–í–∞—à—ñ ¬´—è–∫ —Ç–∏?¬ª –∑–≤—É—á–∞—Ç—å —è–∫ —Ç—É—Ä–±–æ—Ç–∞, –∞ –Ω–µ —Ñ–æ—Ä–º–∞–ª—å–Ω—ñ—Å—Ç—å.",
        "–í–∏ –æ–±–∏–¥–≤–∞ –±–µ—Ä–µ–∂–µ—Ç–µ —Ç–∏—à—É –º—ñ–∂ —Å–ª–æ–≤–∞–º–∏.",
        "–¢–≤–æ—î ¬´–≤—Å–µ –¥–æ–±—Ä–µ?¬ª –∑–±–∏—Ä–∞—î –π–æ–≥–æ –¥–æ–∫—É–ø–∏.",
        "–í—ñ–Ω –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É—î —É–ª—é–±–ª–µ–Ω—ñ –¥–µ—Ç–∞–ª—ñ —Ç–≤–æ—ó—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π.",
        "–í–∞—à—ñ —Ä–∞–Ω–∫–æ–≤—ñ ¬´–ø—Ä–∏–≤—ñ—Ç¬ª –∑–∞–ø—É—Å–∫–∞—é—Ç—å –¥–µ–Ω—å –º‚Äô—è–∫—à–µ –∑–∞ –±—É–¥–∏–ª—å–Ω–∏–∫.",
        "–í–∏ –æ–±–æ—î —Ç—Ä—ñ—à–∫–∏ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ –ø—Ä–æ—â–∞—î—Ç–µ—Å—è, –Ω—ñ–∂ —Ç—Ä–µ–±–∞.",
        "–¢–≤–æ—ó –∫–æ—Ä–æ—Ç–∫—ñ —Ñ—Ä–∞–∑–∏ –≤–º—ñ—é—Ç—å –¥–æ–≤–≥–æ –≥—Ä—ñ—Ç–∏.",
        "–í–∏ –≤–º—ñ—î—Ç–µ –º–æ–≤—á–∞—Ç–∏ –ø–æ—Ä—è–¥ –Ω–∞–≤—ñ—Ç—å —É —á–∞—Ç—ñ.",
        "–ô–æ–º—É —Ö–æ—á–µ—Ç—å—Å—è –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ —á–µ—Å–Ω–æ, –±–æ —Ç–∞–∫ –±–µ–∑–ø–µ—á–Ω–æ –∑ —Ç–æ–±–æ—é.",
        "–í–∞—à—ñ —Ä–æ–∑–º–æ–≤–∏ —Ä–æ–∑—à–∏—Ä—é—é—Ç—å –ø–æ–≤—ñ—Ç—Ä—è –º—ñ–∂ –º—ñ—Å—Ç–∞–º–∏.",
        "–¢–∏ –≤—ñ–¥—á—É–≤–∞—î—à –π–æ–≥–æ –Ω–∞—Å—Ç—Ä—ñ–π —â–µ –¥–æ —Å–ª—ñ–≤ ‚Äî —ñ –≤—ñ–Ω —Ç–≤—ñ–π —Ç–∞–∫–æ–∂.",
        "–í–∞—à—ñ ¬´–ø–æ—Ç—ñ–º —Ä–æ–∑–∫–∞–∂—É¬ª –∑–∞–≤–∂–¥–∏ –º–∞—é—Ç—å –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è.",
        "–í–∏ –æ–±–º—ñ–Ω—é—î—Ç–µ—Å—è —Å–ø–æ–∫–æ—î–º, —è–∫ –ª–∏—Å—Ç–∞–º–∏.",
        "–¢–≤–æ—î ¬´—è –ø–æ—Ä—É—á¬ª –∑–≤—É—á–∏—Ç—å –¥–ª—è –Ω—å–æ–≥–æ, —è–∫ –æ–±—ñ—Ü—è–Ω–∫–∞ —Å–≤—ñ—Ç–ª–∞.",
        "–í–∞—à—ñ –∂–∞—Ä—Ç–∏ –º–∞—é—Ç—å —Å–ø—ñ–ª—å–Ω—É –ø–∞–º‚Äô—è—Ç—å.",
        "–ù–∞–≤—ñ—Ç—å –∫–æ–ª–∏ –º–∞–ª–æ —á–∞—Å—É ‚Äî –≤–∏ –≤—Å—Ç–∏–≥–∞—î—Ç–µ –±—É—Ç–∏ —Ç–µ–ø–ª–∏–º–∏.",
        "–í–∏ –æ–±–∏–¥–≤–∞ —á–∏—Ç–∞—î—Ç–µ –º—ñ–∂ –∫–æ–º–∞–º–∏ —ñ —Ä–æ–∑—É–º—ñ—î—Ç–µ –±–µ–∑ –ø–æ—è—Å–Ω–µ–Ω—å.",
        "–¢–≤–æ—î ¬´–±–µ—Ä–µ–∂–∏ —Å–µ–±–µ¬ª –≤—ñ–Ω —Å–ø—Ä–∏–π–º–∞—î —Å–µ—Ä–π–æ–∑–Ω–æ.",
        "–í–∞—à—ñ —Ä–µ–∞–∫—Ü—ñ—ó –ø—Ä–∏—Ö–æ–¥—è—Ç—å –º–∞–π–∂–µ –æ–¥–Ω–æ—á–∞—Å–Ω–æ ‚Äî –Ω—ñ–±–∏ —Å–µ—Ä—Ü—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–ª–∏—Å—è.",
        "–¢–∏ –¥–ª—è –Ω—å–æ–≥–æ ‚Äî –Ω–∞–¥—ñ–π–Ω–µ –º—ñ—Å—Ü–µ –≤ –ø–æ—Ç–æ—Ü—ñ –¥–Ω—è.",
        "–í–∞—à—ñ —Å–ª–æ–≤–∞ —Å—Ç–∏—Ö–∞—é—Ç—å –º‚Äô—è–∫–æ, —è–∫ –≤–µ—á—ñ—Ä–Ω—î —Å–≤—ñ—Ç–ª–æ.",
        "–í—ñ–Ω —Ç—Ä–∏–º–∞—î —Ç–≤–æ—ó —Ñ—Ä–∞–∑–∏ –ø—Ä–∏ —Å–æ–±—ñ –¥–æ–≤—à–µ, –Ω—ñ–∂ –∑–¥–∞—î—Ç—å—Å—è.",
        "–í–∞—à—ñ –º–∞–ª–µ–Ω—å–∫—ñ ¬´–∞–≥–∞¬ª —ñ ¬´—É–≥—É¬ª –∑–≤—É—á–∞—Ç—å, —è–∫ –∑–≥–æ–¥–∞ –±—É—Ç–∏ –±–ª–∏–∂—á–µ.",
        "–¢–∏ –≤—ñ–¥—á—É–≤–∞—î—à, —è–∫ –≤—ñ–Ω –ø–æ—Å–º—ñ—Ö–∞—î—Ç—å—Å—è, —â–µ –¥–æ –µ–º–æ–¥–∑—ñ.",
        "–í–∞—à—ñ —Ä–æ–∑–º–æ–≤–∏ ‚Äî —Ü–µ —Ç–µ—Ä–∏—Ç–æ—Ä—ñ—è –±–µ–∑ –∑–∞–π–≤–æ–≥–æ –ø–∞—Ñ–æ—Å—É, –∞–ª–µ –∑ —Ç–µ–ø–ª–æ–º.",
        "–¢–≤–æ—î ¬´–Ω–∞–ø–∏—à–∏, —è–∫ –±—É–¥–µ—à¬ª –≤—ñ–Ω —á–∏—Ç–∞—î —è–∫ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—è.",
        "–í–∏ –Ω–µ –∑–º–∞–≥–∞—î—Ç–µ—Å—å –≥–æ–ª–æ—Å–∞–º–∏ ‚Äî –≤–∏ —Å–ª—É—Ö–∞—î—Ç–µ –æ–¥–∏–Ω –æ–¥–Ω–æ–≥–æ.",
        "–¢–≤–æ—î ¬´—è –≤—ñ—Ä—é¬ª –¥–æ–¥–∞—î –π–æ–º—É –≤–∏—Å–æ—Ç–∏.",
        "–í–∞—à—ñ –∑–≥–∞–¥–∫–∏ –ø—Ä–æ –±—É–¥–µ–Ω–Ω—ñ —Ä–µ—á—ñ —á–æ–º—É—Å—å –∑–∞–≤–∂–¥–∏ –ø—Ä–∏—î–º–Ω—ñ.",
        "–¢–∏ ‚Äî –π–æ–≥–æ —É–ª—é–±–ª–µ–Ω–∞ –∑–≤–∏—á–∫–∞ –≤ –∫—ñ–Ω—Ü—ñ –¥–Ω—è.",
        "–í–∞—à—ñ —Ç–µ–º–ø–∏ —Ä—ñ–∑–Ω—ñ, –∞–ª–µ –∫—Ä–æ–∫ —É –∫—Ä–æ–∫.",
        "–¢–≤–æ—î ¬´–¥–æ–±—Ä–∏–π —Ä–∞–Ω–æ–∫¬ª —É–º—ñ—î –ª–∞–≥—ñ–¥–Ω–æ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏.",
        "–í–∏ –æ–±–∏—Ä–∞—î—Ç–µ –ø—Ä–æ—Å—Ç—ñ —Å–ª–æ–≤–∞, –∞–ª–µ –≤–æ–Ω–∏ –ø—Ä–∞—Ü—é—é—Ç—å —è–∫ –º–∞–≥—ñ—è.",
        "–¢–≤–æ—î ¬´–ø–æ–≤–µ—Ä–Ω—É—Å—å –ø—ñ–∑–Ω—ñ—à–µ¬ª –≤—ñ–Ω —á–µ–∫–∞—î, —è–∫ –±–æ–Ω—É—Å–Ω—É —Å—Ü–µ–Ω—É.",
        "–í–∞—à—ñ —Å–µ–Ω—Å–∏ –∑–±–∏—Ä–∞—é—Ç—å—Å—è –≤ –æ–¥–∏–Ω —Å–ø—ñ–ª—å–Ω–∏–π –Ω–∞—Å—Ç—Ä—ñ–π.",
        "–¢–∏ ‚Äî –ø—Ä–∏—á–∏–Ω–∞, —á–æ–º—É –π–æ–º—É —Ö–æ—á–µ—Ç—å—Å—è –±—É—Ç–∏ –∫—Ä–∞—â–∏–º —É –¥—Ä—ñ–±–Ω–∏—Ü—è—Ö.",
        "–í–∞—à—ñ ¬´–ø–∏—à–∏, –∫–æ–ª–∏ –∑—Ä—É—á–Ω–æ¬ª –∑–∞–≤–∂–¥–∏ –∑–Ω–∞—Ö–æ–¥—è—Ç—å –∑—Ä—É—á–Ω–∏–π –º–æ–º–µ–Ω—Ç.",
        "–¢–≤–æ—î —Ç–µ–ø–ª–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –Ω–∞–≤—ñ—Ç—å —á–µ—Ä–µ–∑ —Å–∫—É–ø—ñ —Ä—è–¥–∫–∏.",
        "–í–∏ –æ–±–∏–¥–≤–∞ —Ü—ñ–Ω—É—î—Ç–µ —Å–ø–æ–∫—ñ–π —ñ –Ω–µ –ø–æ—Å–ø—ñ—à–∞—î—Ç–µ –π–æ–≥–æ –≤—Ç—Ä–∞—Ç–∏—Ç–∏.",
        "–¢–≤–æ—î —ñ–º‚Äô—è –≤ –π–æ–≥–æ —Ç–µ–ª–µ—Ñ–æ–Ω—ñ –∑–≤—É—á–∏—Ç—å —Ç–∏—Ö–æ, –∞–ª–µ –≥–æ–ª–æ–≤–Ω–µ."
      ];

      const SPICY_PASS = 'banan';

      // –ö–ª—é—á—ñ localStorage
      const K_TS = 'fortune_ts';
      const K_TEXT = 'fortune_text';
      const K_USED_SPICY = 'fortune_used_spicy';
      const K_UNLOCKED = 'fortune_unlocked';

      // –Ü–Ω—Ç–µ—Ä–≤–∞–ª (—Ç–µ—Å—Ç–æ–≤–∏–π ‚Äî 60 —Å–µ–∫)
      const ONE_HOUR = 30 * 1000;

      const now = () => Date.now();
      const pad = n => String(n).padStart(2, '0');
      const fmtHMS = ms => { if (ms < 0) ms = 0; const s = Math.floor(ms / 1000); const h = Math.floor(s / 3600); const m = Math.floor((s % 3600) / 60); const ss = s % 60; return h > 0 ? `${pad(h)}:${pad(m)}:${pad(ss)}` : `${pad(m)}:${pad(ss)}`; };
      const leftMs = () => ONE_HOUR - (now() - Number(localStorage.getItem(K_TS) || 0));

      const isUnlocked = () => localStorage.getItem(K_UNLOCKED) === 'true';
      const setUnlocked = v => localStorage.setItem(K_UNLOCKED, v ? 'true' : 'false');

      function setStatus(ready, left) {
        DOT.classList.toggle('wait', !ready);
        STATUS.textContent = ready ? '–ú–æ–∂–Ω–∞ –∫–ª—ñ–∫–∞—Ç—å' : '–ó–∞—á–µ–∫–∞–π –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ä–∞–∑—É';
        NEXT.textContent = ready ? '‚Äî' : `–ß–µ—Ä–µ–∑ ${fmtHMS(left)}`;
      }
      function setLockedUI() {
        DOT.classList.add('wait');
        STATUS.textContent = '–ó–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ';
        NEXT.textContent = '‚Äî';
        modeChip.textContent = '–†–µ–∂–∏–º: –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ';
      }
      function setUnlockedUI() { modeChip.textContent = '–†–µ–∂–∏–º: —Ä–æ–∑–±–ª–æ–∫–æ–≤–∞–Ω–æ'; }

      let tickerId = null;
      function startTicker() {
        stopTicker();
        if (!isUnlocked()) { setLockedUI(); return; }
        const tick = () => {
          const l = leftMs();
          const ok = l <= 0;
          setStatus(ok, l);
          if (ok) stopTicker(); else tickerId = requestAnimationFrame(tick);
        };
        tickerId = requestAnimationFrame(tick);
      }
      function stopTicker() { if (tickerId) cancelAnimationFrame(tickerId), tickerId = null; }
      function lockForHour() { localStorage.setItem(K_TS, String(now())); startTicker(); }

      function showToast(msg) {
        TOAST.textContent = msg;
        TOAST.classList.add('show');
        clearTimeout(showToast._t);
        showToast._t = setTimeout(() => TOAST.classList.remove('show'), 2500);
      }

      // ======= –£–¢–ò–õ–Ü–¢–ò –ü–£–õ–£ =======
      function getUsed(key) { try { return JSON.parse(localStorage.getItem(key) || '[]') } catch { return [] } }
      function setUsed(key, arr) { localStorage.setItem(key, JSON.stringify(arr)) }
      function remainingCount(list, key) { const used = getUsed(key); return Math.max(0, list.length - Math.min(list.length, used.length)); }
      function pickIndexNonRepeating(list, key) {
        let used = getUsed(key);
        if (used.length >= list.length) used = [];
        const avail = list.map((_, i) => i).filter(i => !used.includes(i));
        const idx = avail[(Math.random() * avail.length) | 0];
        used.push(idx); setUsed(key, used); return idx;
      }

      function totalRemainingNow() {
        return isUnlocked() ? remainingCount(PRED_SPICY, K_USED_SPICY) : 0;
      }
      function updateCountUI() { countEl.textContent = '–ó–∞–ª–∏—à–∏–ª–æ—Å—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å: ' + totalRemainingNow(); }

      function chooseFortune() {
        // –ü—Ä–∞—Ü—é—î–º–æ —Ç—ñ–ª—å–∫–∏ –∑ PRED_SPICY
        // –Ø–∫—â–æ –≤–∏—á–µ—Ä–ø–∞–Ω–æ ‚Äî –æ–±–Ω—É–ª—è—î–º–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ
        if (remainingCount(PRED_SPICY, K_USED_SPICY) === 0) setUsed(K_USED_SPICY, []);
        const idx = pickIndexNonRepeating(PRED_SPICY, K_USED_SPICY);
        return '‚ù§Ô∏è' + PRED_SPICY[idx];
      }

      async function typeText(el, text) {
        el.classList.remove('revealed');
        el.textContent = '';
        const base = 10, jitter = 35;
        for (let i = 0; i < text.length; i++) {
          el.textContent += text[i];
          await new Promise(r => setTimeout(r, base + Math.random() * jitter));
        }
        el.classList.add('revealed');
      }

      function cocoaConfetti() {
        const W = FX.width = innerWidth, H = FX.height = innerHeight;
        const N = 140, colors = ['#7b4b3a', '#a06b55', '#c79275', '#e9c2aa'];
        const parts = Array.from({ length: N }, () => ({
          x: Math.random() * W, y: -20 - Math.random() * H * .2,
          vx: (Math.random() - .5) * 1.5, vy: 1.8 + Math.random() * 2.8,
          w: 6 + Math.random() * 10, h: 2 + Math.random() * 6,
          rot: Math.random() * Math.PI * 2, vrot: (Math.random() - .5) * .15,
          color: colors[(Math.random() * colors.length) | 0], round: Math.random() < .5
        }));
        let t = 0;
        (function tick() {
          ctx.clearRect(0, 0, W, H);
          for (const p of parts) {
            p.x += p.vx; p.y += p.vy; p.rot += p.vrot;
            ctx.save(); ctx.translate(p.x, p.y); ctx.rotate(p.rot);
            ctx.fillStyle = p.color;
            p.round ? (ctx.beginPath(), ctx.ellipse(0, 0, p.w / 2, p.h / 2, 0, 0, Math.PI * 2), ctx.fill())
              : ctx.fillRect(-p.w / 2, -p.h / 2, p.w, p.h);
            ctx.restore();
          }
          if (++t < 200) requestAnimationFrame(tick); else ctx.clearRect(0, 0, W, H);
        })();
      }

      function sparkles() {
        const W = SP.width = innerWidth, H = SP.height = innerHeight; const S = 40;
        const dots = Array.from({ length: S }, () => ({
          x: Math.random() * W, y: Math.random() * H, r: Math.random() * 1.8 + 0.6,
          a: Math.random() * Math.PI * 2, v: .004 + .004 * Math.random()
        }));
        (function loop() {
          spx.clearRect(0, 0, W, H);
          for (const d of dots) {
            d.a += d.v; const tw = 0.6 + 0.4 * Math.sin(d.a * 3);
            spx.globalAlpha = tw; spx.fillStyle = '#a06b55';
            spx.beginPath(); spx.arc(d.x + Math.sin(d.a) * 6, d.y + Math.cos(d.a) * 6, d.r, 0, Math.PI * 2); spx.fill();
          }
          requestAnimationFrame(loop);
        })();
      }

      // –ú–æ–¥–∞–ª –ø–∞—Ä–æ–ª—é
      function openPass() { modal.classList.add('show'); passInput.value = ''; passInput.focus(); }
      function closePass() { modal.classList.remove('show'); }
      lockBtn.addEventListener('click', openPass);
      passCancel.addEventListener('click', closePass);
      passOk.addEventListener('click', () => {
        const ok = passInput.value === SPICY_PASS;
        if (ok) {
          setUnlocked(true);
          setUnlockedUI();
          updateCountUI();
          showToast('–†–æ–∑–±–ª–æ–∫–æ–≤–∞–Ω–æ');
          closePass();
          startTicker();
        } else {
          showToast('–•–∏–±–Ω–∏–π –ø–∞—Ä–æ–ª—å');
        }
      });

      // –ö–Ω–æ–ø–∫–∞ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è (–∫–æ–ø—ñ—é—î —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π —Ç–µ–∫—Å—Ç)
      copyBtn.addEventListener('click', async () => {
        try {
          await navigator.clipboard.writeText('—Ç–∏ –º–µ–Ω—ñ –ø–æ–¥–æ–±–∞—î—à—å—Å—è');
          showToast('–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ: ' + FORTUNE.textContent);
        } catch (e) {
          showToast('–ù–µ –≤–¥–∞–ª–æ—Å—è —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏');
        }
      });

      // –†—ñ–ø–ª –Ω–∞ –∫–Ω–æ–ø—Ü—ñ
      BTN.addEventListener('pointermove', (e) => {
        const r = BTN.getBoundingClientRect();
        BTN.style.setProperty('--x', (e.clientX - r.left) + 'px');
        BTN.style.setProperty('--y', (e.clientY - r.top) + 'px');
      });

      function saveFortuneText(text) { localStorage.setItem(K_TEXT, text) }

      // –û—Å–Ω–æ–≤–Ω–∞ –∫–Ω–æ–ø–∫–∞
      BTN.addEventListener('click', async () => {
        if (!isUnlocked()) { showToast('–°–ø–æ—á–∞—Ç–∫—É –≤–≤–µ–¥–∏ –ø–∞—Ä–æ–ª—å'); openPass(); return; }

        const left = leftMs();
        if (left > 0) { showToast(`–©–µ —Ç—Ä–æ—Ö–∏ —Ç–µ—Ä–ø—ñ–Ω–Ω—è ‚Äî —á–µ—Ä–µ–∑ ${fmtHMS(left)}`); startTicker(); return; }
        localStorage.setItem(K_TS, String(now()));
        startTicker();

        const text = chooseFortune();
        await typeText(FORTUNE, text);
        cocoaConfetti();
        saveFortuneText(text);

        updateCountUI();
      });

      // –Ü–Ω—ñ—Ç
      (function restore() {
        sparkles();
        if (isUnlocked()) setUnlockedUI(); else setLockedUI();
        updateCountUI();
        startTicker();
      })();

    })();
  </script>
</body>

</html>