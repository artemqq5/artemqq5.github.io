<!doctype html>
<html lang="uk">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è</title>
  <style>
    :root {
      /* –ü–∞–ª—ñ—Ç—Ä–∞: –Ω—ñ–∂–Ω—ñ –∫—Ä–µ–º–æ–≤—ñ + —à–æ–∫–æ–ª–∞–¥ */
      --bg: #ffffff;
      --cream: #fff7ef;
      --latte: #f7e7d8;
      --cocoa: #7b4b3a;
      --cocoa-mid: #a06b55;
      --cocoa-light: #c79275;
      --text: #3b2a23;
      --muted: #7c6d66;
      --chip: #ffffffcc;
      --chip-brd: #00000014;
      --btn-text: #fffdfb;
      --shadow: 0 12px 40px rgba(101, 74, 60, .18);
      --accent: #ffede1;
      --accent2: #ffe3d1;
      --glow: rgba(160, 107, 85, .35)
    }

    * {
      box-sizing: border-box
    }

    html,
    body {
      height: 100%
    }

    body {
      margin: 0;
      color: var(--text);
      font: 16px/1.55 Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      background:
        radial-gradient(1200px 800px at 20% 0%, var(--cream), transparent 60%),
        radial-gradient(900px 900px at 100% 100%, var(--latte), transparent 60%),
        linear-gradient(180deg, #fff, #fff);
      overflow: hidden;
      perspective: 1200px;
    }

    body::before {
      content: "";
      position: fixed;
      inset: -10%;
      background: conic-gradient(from 0deg at 50% 50%, #fff, var(--cream), #fff, var(--latte), #fff);
      filter: blur(80px) saturate(120%);
      opacity: .45;
      animation: swirl 80s linear infinite;
      pointer-events: none
    }

    @keyframes swirl {
      to {
        transform: rotate(360deg)
      }
    }

    .wave {
      position: fixed;
      left: -10vw;
      right: -10vw;
      height: 30vmax;
      border-radius: 50%;
      background:
        radial-gradient(120vmax 40vmax at 50% 40%, rgba(160, 107, 85, .10), transparent 60%),
        radial-gradient(90vmax 30vmax at 60% 80%, rgba(199, 146, 117, .10), transparent 60%);
      filter: blur(20px);
      pointer-events: none;
    }

    .wave.w1 {
      top: -12vmax;
      animation: float1 18s ease-in-out infinite
    }

    .wave.w2 {
      bottom: -16vmax;
      animation: float2 22s ease-in-out infinite
    }

    @keyframes float1 {

      0%,
      100% {
        transform: translateY(0)
      }

      50% {
        transform: translateY(1.2vmax)
      }
    }

    @keyframes float2 {

      0%,
      100% {
        transform: translateY(0)
      }

      50% {
        transform: translateY(-1.4vmax)
      }
    }

    .spark {
      position: fixed;
      inset: 0;
      pointer-events: none;
      mix-blend-mode: soft-light
    }

    .wrap {
      position: relative;
      height: 100%;
      display: grid;
      place-items: center;
      padding: 28px
    }

    .card {
      width: min(780px, 92vw);
      background: #ffffffcc;
      backdrop-filter: blur(14px) saturate(120%);
      border: 1px solid var(--chip-brd);
      border-radius: 24px;
      padding: 28px clamp(18px, 5vw, 36px);
      box-shadow: var(--shadow);
      transform-style: preserve-3d;
      transition: transform .15s ease, box-shadow .2s ease
    }

    .card:hover {
      box-shadow: 0 18px 54px var(--glow)
    }

    .heading {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: .9rem
    }

    .ttl {
      display: flex;
      gap: .9rem;
      align-items: center
    }

    .logo {
      width: 48px;
      height: 48px;
      border-radius: 14px;
      background:
        radial-gradient(circle at 35% 30%, #fff2e6, transparent 50%),
        radial-gradient(circle at 65% 70%, #fde5d1, transparent 55%),
        linear-gradient(135deg, var(--cocoa-mid), var(--cocoa-light));
      box-shadow: inset 0 0 0 1px #ffffff88, 0 6px 16px rgba(160, 107, 85, .25);
    }

    h1 {
      margin: 0;
      font-weight: 800;
      letter-spacing: .2px
    }

    .subtitle {
      color: var(--muted);
      margin-top: .25rem
    }

    .actions {
      display: flex;
      gap: .6rem;
      align-items: center
    }

    .iconbtn {
      display: inline-grid;
      place-items: center;
      width: 40px;
      height: 40px;
      border-radius: 12px;
      border: 1px solid var(--chip-brd);
      background: var(--chip);
      cursor: pointer;
      transition: transform .12s ease, box-shadow .12s ease, filter .12s ease
    }

    .iconbtn:hover {
      transform: translateY(-1px)
    }

    .iconbtn:active {
      transform: translateY(0)
    }

    .btn {
      position: relative;
      margin-top: 18px;
      display: inline-flex;
      align-items: center;
      gap: .65rem;
      padding: 14px 20px;
      border-radius: 16px;
      border: none;
      cursor: pointer;
      color: var(--btn-text);
      font-weight: 800;
      letter-spacing: .2px;
      background: linear-gradient(135deg, var(--cocoa-mid), var(--cocoa));
      box-shadow: 0 10px 28px rgba(123, 75, 58, .28), inset 0 -2px 0 rgba(0, 0, 0, .08);
      transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
      overflow: hidden
    }

    .btn:hover {
      box-shadow: 0 16px 40px rgba(123, 75, 58, .35);
      filter: saturate(108%)
    }

    .btn:active {
      transform: translateY(1px) scale(.99)
    }

    .btn .ripple {
      position: absolute;
      inset: 0;
      opacity: 0;
      pointer-events: none;
      mix-blend-mode: soft-light;
      background: radial-gradient(160px 160px at var(--x, 50%) var(--y, 50%), rgba(255, 255, 255, .65), transparent 40%);
      transition: opacity .25s ease
    }

    .btn:hover .ripple {
      opacity: 1
    }

    .fortune {
      margin-top: 18px;
      min-height: 3lh;
      font-size: clamp(20px, 3.4vw, 28px);
      white-space: pre-wrap
    }

    .fortune.revealed {
      animation: pop .6s ease
    }

    @keyframes pop {
      0% {
        transform: scale(.985);
        opacity: .2
      }

      60% {
        transform: scale(1.03);
        opacity: 1
      }

      100% {
        transform: scale(1)
      }
    }

    .info {
      margin-top: 10px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      color: var(--muted);
      font-size: .95rem
    }

    .chip {
      display: inline-flex;
      align-items: center;
      gap: .45rem;
      padding: 8px 12px;
      border-radius: 999px;
      background: var(--chip);
      border: 1px solid var(--chip-brd)
    }

    .dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #53b164;
      box-shadow: 0 0 10px #53b16477
    }

    .dot.wait {
      background: #d26b6b;
      box-shadow: 0 0 10px #d26b6b77
    }

    .toast {
      position: fixed;
      left: 50%;
      bottom: 22px;
      transform: translateX(-50%) translateY(20px);
      background: #fff;
      color: var(--text);
      border: 1px solid var(--chip-brd);
      padding: 10px 14px;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, .08);
      opacity: 0;
      pointer-events: none;
      transition: .25s ease;
      max-width: 92vw
    }

    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0)
    }

    .modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, .25)
    }

    .modal.show {
      display: flex
    }

    .dialog {
      width: min(420px, 92vw);
      background: #fff;
      border: 1px solid var(--chip-brd);
      border-radius: 16px;
      padding: 16px 16px 14px;
      box-shadow: 0 12px 40px rgba(0, 0, 0, .18)
    }

    .dialog h3 {
      margin: 0 0 8px 0
    }

    .fld {
      display: flex;
      gap: .5rem
    }

    .fld input {
      flex: 1;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid var(--chip-brd);
      font: inherit
    }

    .row {
      display: flex;
      gap: .6rem;
      margin-top: 10px
    }

    .sec {
      font-size: .9rem;
      color: var(--muted)
    }

    canvas#fx {
      position: fixed;
      inset: 0;
      pointer-events: none
    }
  </style>
</head>

<body>
  <div class="wave w1" aria-hidden="true"></div>
  <div class="wave w2" aria-hidden="true"></div>
  <canvas id="fx"></canvas>
  <canvas id="spark" class="spark"></canvas>

  <div class="wrap">
    <div class="card" id="card" role="main" aria-live="polite">
      <div class="heading">
        <div class="ttl">
          <div>
            <h1>–î–ª—è –ù–∞—Ç–∞–ª—ñ—ó</h1>
            <div class="subtitle">–ê—Ä—Ç–µ–º –ø–æ—Å—Ç–∞—Ä–∞–≤—Å—è, —â–æ–± —Ç–∏ –∑–∞–≤–∂–¥–∏ –º–∞–ª–∞ –¥–æ—Å—Ç—É–ø –¥–æ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω—å ‚ú®</div>
          </div>
        </div>
        <div class="actions">
          <button class="iconbtn" id="lockBtn" title="–í–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å" aria-label="–í–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M7 10V8a5 5 0 0 1 10 0v2" stroke="#804f3f" stroke-width="2" stroke-linecap="round" />
              <rect x="4" y="10" width="16" height="10" rx="2" stroke="#804f3f" stroke-width="2" />
              <circle cx="12" cy="15" r="1.6" fill="#804f3f" />
            </svg>
          </button>
          <button class="iconbtn" id="copyBtn" title="–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –∑—ñ–∑–Ω–∞–Ω–Ω—è" aria-label="–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –∑—ñ–∑–Ω–∞–Ω–Ω—è">üìã</button>
        </div>
      </div>

      <button class="btn" id="btn">–û—Ç—Ä–∏–º–∞—Ç–∏ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è <span class="ripple"></span></button>
      <div class="fortune" id="fortune" aria-label="–¢–µ–∫—Å—Ç –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è"></div>

      <div class="info">
        <div class="chip"><span class="dot" id="statusDot"></span><span id="statusText">–ó–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ</span></div>
        <div class="chip">–ù–∞—Å—Ç—É–ø–Ω–µ: <span id="nextTime" style="margin-left:.35rem">‚Äî</span></div>
        <div class="chip" id="modeChip" title="–°—Ç–∞—Ç—É—Å">–†–µ–∂–∏–º: –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ</div>
        <div class="chip" id="count_message" title="–°–∫—ñ–ª—å–∫–∏ –∑–∞–ª–∏—à–∏–ª–æ—Å—å">–ó–∞–ª–∏—à–∏–ª–æ—Å—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å: 0</div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <!-- –ú–æ–¥–∞–ª –ø–∞—Ä–æ–ª—é -->
  <div class="modal" id="passModal" aria-hidden="true">
    <div class="dialog" role="dialog" aria-modal="true" aria-labelledby="dlgTitle">
      <h3 id="dlgTitle">–°–µ–∫—Ä–µ—Ç–Ω—ñ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è</h3>
      <div class="sec">–í–≤–µ–¥–∏ –ø–∞—Ä–æ–ª—å, —â–æ–± —Ä–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è.</div>
      <div class="fld" style="margin-top:10px">
        <input id="passInput" type="password" placeholder="–ü–∞—Ä–æ–ª—å" />
      </div>
      <div class="row">
        <button class="btn" id="passOk">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏<span class="ripple"></span></button>
        <button class="iconbtn" id="passCancel" title="–°–∫–∞—Å—É–≤–∞—Ç–∏" aria-label="–°–∫–∞—Å—É–≤–∞—Ç–∏">‚úï</button>
      </div>
    </div>
  </div>

  <script>
    (() => {
      const BTN = document.getElementById('btn');
      const FORTUNE = document.getElementById('fortune');
      const countEl = document.getElementById('count_message');
      const TOAST = document.getElementById('toast');
      const DOT = document.getElementById('statusDot');
      const STATUS = document.getElementById('statusText');
      const NEXT = document.getElementById('nextTime');
      const FX = document.getElementById('fx');
      const SP = document.getElementById('spark');
      const lockBtn = document.getElementById('lockBtn');
      const copyBtn = document.getElementById('copyBtn');
      const modal = document.getElementById('passModal');
      const passInput = document.getElementById('passInput');
      const passOk = document.getElementById('passOk');
      const passCancel = document.getElementById('passCancel');
      const modeChip = document.getElementById('modeChip');

      const ctx = FX.getContext('2d');
      const spx = SP.getContext('2d');

      const PRED_SPICY = [
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤–æ—î ¬´—Ç–æ–∂–µ¬ª –∑–º—É—Å–∏—Ç—å –π–æ–≥–æ —Å–µ—Ä—Ü–µ –±–∏—Ç–∏—Å—å —à–≤–∏–¥—à–µ, –Ω—ñ–∂ –∫–∞–≤–∞ –∑—Ä–∞–Ω–∫—É.",
        "–ö–æ–ª–∏ —Ç–∏ –∑–≥–∞–¥–∞—î—à –ø—Ä–æ —Ö—Ä–∏–∑–∞–Ω—Ç–µ–º–∏ ‚Äî –≤—ñ–Ω —É—è–≤–∏—Ç—å —É—Å–º—ñ—à–∫—É, —è–∫—É –±–∞—á–∏–≤ —É–ø–µ—Ä—à–µ.",
        "–ü–∏—à–∏ –∫–æ—Ä–æ—Ç–∫–æ –π –≤—ñ–¥–≤–µ—Ä—Ç–æ ‚Äî –≤—ñ–Ω –ø—Ä–æ—á–∏—Ç–∞—î –¥–≤—ñ—á—ñ –π —á–µ—Ä–≤–æ–Ω—ñ—Ç–∏–º–µ.",
        "–ó–Ω–∞–∫ –û–¥–µ—Å–∏: —Ç–≤—ñ–π –Ω–∞—Ç—è–∫ –ø—Ä–æ –º–æ—Ä–µ —Ä–æ–∑—Ç–∞–Ω–µ –≤ –π–æ–≥–æ —É—è–≤—ñ, —è–∫ —Ü—É–∫–æ—Ä —É –∫–∞–≤—ñ.",
        "–Ø–∫—â–æ —Å—å–æ–≥–æ–¥–Ω—ñ –Ω–∞–¥—ñ—à–ª–µ—à —Ä–µ—Ü–µ–ø—Ç –≤–∏–ø—ñ—á–∫–∏ ‚Äî –≤—ñ–Ω –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç—å –ø—Ä–æ —Ç–µ, —è–∫ —Å–∫—É—á–∏–≤.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤–æ—î —Ñ–æ—Ç–æ –∑ —á–∞—à–∫–æ—é –∫–∞–≤–∏ –∑—ñ–±‚Äô—î –π–æ–≥–æ –∑ —Ä–æ–±–æ—á–æ–≥–æ —Ä–∏—Ç–º—É.",
        "–ö–æ–ª–∏ —Ç–∏ —Å–∫–∞–∂–µ—à ¬´—Ç–æ–∂–µ¬ª, –≤—ñ–Ω –≤—ñ–¥—á—É—î, —â–æ –≤–∏ ‚Äî –æ–¥–Ω–µ —Ü—ñ–ª–µ.",
        "–õ–µ–≥–∫–∞ —Ä–µ–≤–Ω—ñ—Å—Ç—å –ê—Ä—Ç–µ–º–∞ —Å—å–æ–≥–æ–¥–Ω—ñ –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç—å—Å—è –Ω–∞ —Ç–≤–æ—î ¬´–∑–∞—Å–ø–æ–∫–æ–π—Å—è, —è –∑ —Ç–æ–±–æ—é¬ª.",
        "–¢–≤—ñ–π —Å–º–∞–π–ª–∏–∫ —ñ–∑ —Å–µ—Ä—Ü–µ–º —Å—å–æ–≥–æ–¥–Ω—ñ —Ä–æ–∑–ø–∞–ª–∏—Ç—å –π–æ–≥–æ –±—ñ–ª—å—à–µ, –Ω—ñ–∂ —Ç–∏ –¥—É–º–∞—î—à.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: –æ–¥–Ω–µ –≥–æ–ª–æ—Å–æ–≤–µ ‚Äî —ñ –≤—ñ–Ω –Ω–µ –∑–º–æ–∂–µ –∑–∞—Å–Ω—É—Ç–∏ –±–µ–∑ —É—Å–º—ñ—à–∫–∏.",
        "–í–∏–ø—ñ—á–∫–∞ —Å—å–æ–≥–æ–¥–Ω—ñ—à–Ω—å–æ–≥–æ –¥–Ω—è: —è–∫—â–æ –Ω–∞–ø–∏—à–µ—à ¬´—Å–ø–µ—á—É –¥–ª—è —Ç–µ–±–µ¬ª, –≤—ñ–Ω –ø–æ–≤—ñ—Ä–∏—Ç—å —É –º–∞–π–±—É—Ç–Ω—î.",
        "–ù–∞—Ç—è–∫ –Ω–∞ ¬´–ø—Ä–∏—ó—Ö–∞—Ç–∏ —Å–∫–æ—Ä—ñ—à–µ¬ª –±—É–¥–µ —Å–∏–ª—å–Ω—ñ—à–∏–π –∑–∞ –±—É–¥—å-—è–∫—ñ —Å–ª–æ–≤–∞.",
        "–ó–Ω–∞–∫ –ü–æ–ª—Ç–∞–≤–∏: –≤—ñ–Ω –≥–æ—Ç—É—î –≤–∞–ª—ñ–∑—É –¥—É–º–∫–∞–º–∏, –∫–æ–ª–∏ —á—É—î —Ç–≤–æ—î ¬´–∂–¥—É¬ª.",
        "–¢–≤—ñ–π –æ–¥–∏–Ω –ø–æ—Ü—ñ–ª—É–Ω–æ–∫-–µ–º–æ–¥–∑—ñ –∑–º—ñ–Ω–∏—Ç—å –π–æ–≥–æ –¥–µ–Ω—å.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Å—å–æ–≥–æ–¥–Ω—ñ —Ç–≤–æ—î ¬´–¥–æ–±—Ä–∞–Ω—ñ—á¬ª —Å—Ç–∞–Ω–µ –π–æ–≥–æ –≥–æ–ª–æ–≤–Ω–∏–º —Å–Ω–æ–º.",
        "–ó—ñ—Ä–∫–∏ —à–µ–ø–æ—á—É—Ç—å: –æ–¥–Ω–µ —Ñ–æ—Ç–æ —Ç–≤–æ–≥–æ –º—ñ—Å—Ç–∞ –∑–º—É—Å–∏—Ç—å –π–æ–≥–æ —Ä–∞—Ö—É–≤–∞—Ç–∏ –¥–Ω—ñ –¥–æ –ø–µ—Ä–µ—ó–∑–¥—É.",
        "–Ø–∫—â–æ –∑–≥–∞–¥–∞—î—à –ø—Ä–æ —É–ª—é–±–ª–µ–Ω—É –∫–∞–≤—É, –≤—ñ–Ω –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç—å –±—ñ–ª—å—à–µ, –Ω—ñ–∂ —Ö–æ—Ç—ñ–≤.",
        "–¢–≤–æ—î ¬´—Ç–æ–∂–µ —Å–∫—É—á–∞—é¬ª —Å—å–æ–≥–æ–¥–Ω—ñ –∑–≤—É—á–∏—Ç—å, —è–∫ –∑—ñ–∑–Ω–∞–Ω–Ω—è.",
        "–ö–æ–ª–∏ –Ω–∞—Ç—è–∫–Ω–µ—à –Ω–∞ –∑—É—Å—Ç—Ä—ñ—á —ñ –≤—ñ–Ω –∑–∞–±—É–¥–µ –ø—Ä–æ –≤—Å—ñ —Å–≤–æ—ó —Å—Ç—Ä–∞—Ö–∏.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤–æ—î —Å–ª–æ–≤–æ —Å—Ç–∞–Ω–µ –¥–ª—è –Ω—å–æ–≥–æ —Å–ø–æ–∫–æ—î–º, —è–∫–æ–≥–æ –≤—ñ–Ω —à—É–∫–∞—î.",
        "–Ø–∫—â–æ —Å—å–æ–≥–æ–¥–Ω—ñ –Ω–∞–ø–∏—à–µ—à ¬´—Ç–∏ –º—ñ–π¬ª, –≤—ñ–Ω –ø–µ—Ä–µ—á–∏—Ç–∞—î —Ü–µ –¥–µ—Å—è—Ç—å —Ä–∞–∑—ñ–≤.",
        "–ö–∞–≤–∞ –≤–¥–≤–æ—Ö –ø–æ–∫–∏ –ª–∏—à–µ —É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è—Ö, –∞–ª–µ —Ç–∏ –∑–º—É—Å–∏—à –π–æ–≥–æ –º—Ä—ñ—è—Ç–∏.",
        "–¢–≤–æ—î ¬´—â–µ —Ç—Ä—ñ—à–∫–∏ —ñ —Ä–∞–∑–æ–º¬ª –±—É–¥–µ –π–æ–≥–æ –º–æ—Ç–∏–≤–∞—Ü—ñ—î—é.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤–æ—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω–µ –¥–ª—è –Ω—å–æ–≥–æ –æ–±—ñ–π–º–∞–º–∏.",
        "–ó–Ω–∞–∫ –û–¥–µ—Å–∏: —Ç–≤–æ—ó –ø–∞–ª—å—Ü—ñ –Ω–∞ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä—ñ —Å—å–æ–≥–æ–¥–Ω—ñ —Å–∏–ª—å–Ω—ñ—à—ñ, –Ω—ñ–∂ —Ö–≤–∏–ª—ñ –º–æ—Ä—è.",
        "–¢–≤–æ—î ¬´—Ç–æ–∂–µ —Ö–æ—á—É¬ª —Å—Ç–∞–Ω–µ –¥–ª—è –Ω—å–æ–≥–æ –Ω–æ–≤–∏–º —Å–µ—Ä—Ü–µ–º —É —á–∞—Ç—ñ.",
        "–°—å–æ–≥–æ–¥–Ω—ñ —Ç–≤–æ—î —ñ–º‚Äô—è –¥–ª—è –Ω—å–æ–≥–æ –∑–≤—É—á–∏—Ç—å —Å–æ–ª–æ–¥—à–µ –∑–∞ –≤–∏–ø—ñ—á–∫—É.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤–æ—ó —Å–ª–æ–≤–∞ —Å—å–æ–≥–æ–¥–Ω—ñ —Ç–æ—Ä–∫–Ω—É—Ç—å—Å—è –π–æ–≥–æ –≥–ª–∏–±—à–µ –∑–∞ –±—É–¥—å-—è–∫—É –ø—ñ—Å–Ω—é.",
        "–ö–æ–ª–∏ —Ç–∏ –∑–≥–∞–¥–∞—î—à –º–æ—Ä–µ ‚Äî –≤—ñ–Ω –∑–∞—Ö–æ—á–µ –±—É—Ç–∏ —Ç–≤–æ—ó–º –±–µ—Ä–µ–≥–æ–º.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤—ñ–π –ª–µ–≥–∫–∏–π –Ω–∞—Ç—è–∫ —Å—å–æ–≥–æ–¥–Ω—ñ –ø–µ—Ä–µ–≤–µ—Ä–Ω–µ –π–æ–≥–æ –Ω–∞—Å—Ç—Ä—ñ–π.",
        "–í—ñ–Ω –∑–Ω–æ–≤—É –ø–µ—Ä–µ–∂–∏–≤–∞—Ç–∏–º–µ, –∞ —Ç–∏ –∑–Ω–æ–≤—É –π–æ–≥–æ –≤—Ä—è—Ç—É—î—à.",
        "–¢–≤–æ—è —É—Å–º—ñ—à–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ —Å—Ç–∞–Ω–µ –¥–ª—è –Ω—å–æ–≥–æ –¥–æ–∫–∞–∑–æ–º, —â–æ –≤—Å–µ –≤–∏–π–¥–µ.",
        "–ó–Ω–∞–∫ –û–¥–µ—Å–∏: —Ç–≤–æ—ó –æ—á—ñ —Å–∏–ª—å–Ω—ñ—à—ñ –∑–∞ –±—É–¥—å-—è–∫—ñ —Ö–≤–∏–ª—ñ.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–∏ –∑–º—É—Å–∏—à –π–æ–≥–æ –≤—ñ–¥—á—É—Ç–∏, —â–æ —Ä–µ–≤–Ω–æ—â—ñ ‚Äî —Ü–µ –ª—é–±–æ–≤.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤—ñ–π –æ–¥–∏–Ω —Ä—è–¥–æ–∫ —Å—å–æ–≥–æ–¥–Ω—ñ —Ä–æ–∑–≤‚Äô—è–∂–µ –π–æ–≥–æ —Ç—Ä–∏–≤–æ–≥—É.",
        "–¢–≤–æ—è –û–¥–µ—Å–∞ —Å—Ç–∞—î –¥–ª—è –Ω—å–æ–≥–æ –º—ñ—Å—Ü–µ–º –º—Ä—ñ—ó.",
        "–í—ñ–Ω –∑–≥–∞–¥–∞—î —Ö—Ä–∏–∑–∞–Ω—Ç–µ–º–∏ —â–æ—Ä–∞–∑—É, —è–∫ —Ç–∏ –Ω–∞–ø–∏—à–µ—à ¬´–∫–≤—ñ—Ç–∏¬ª.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤–æ—ó —Å–ª–æ–≤–∞ —Å—å–æ–≥–æ–¥–Ω—ñ ‚Äî —è–∫ —Ç–æ—Ä–∫–∞–Ω–Ω—è —Ä—É–∫.",
        "–¢–≤–æ—î ¬´—Ç–æ–∂–µ —Å–º—ñ—é—Å—è¬ª –¥–ª—è –Ω—å–æ–≥–æ —è–∫ –º—É–∑–∏–∫–∞.",
        "–Ø–∫—â–æ —Å—å–æ–≥–æ–¥–Ω—ñ –ø—ñ–¥–º–æ—Ä–≥–Ω–µ—à —Å–º–∞–π–ª–∏–∫–æ–º, –≤—ñ–Ω –∑–≥–∞–¥–∞—î —Ç–≤–æ—ó –æ—á—ñ.",
        "–ó–Ω–∞–∫ –û–¥–µ—Å–∏: —Ç–≤—ñ–π –¥–æ—Ç–∏–∫ —É—è–≤–Ω–∏–π, –∞–ª–µ —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –¥–ª—è –Ω—å–æ–≥–æ.",
        "–¢–≤–æ—ó –æ—á—ñ, –Ω–∞–≤—ñ—Ç—å –Ω–∞ —Ñ–æ—Ç–æ, –∑—Ä–æ–±–ª—è—Ç—å –π–æ–≥–æ –¥–µ–Ω—å.",
        "–Ø–∫—â–æ –Ω–∞–ø–∏—à–µ—à ¬´—è —Å–∫—É—á–∞—é¬ª, –≤—ñ–Ω –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ —Ö–≤–∏–ª—é–≤–∞—Ç–∏—Å—è.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤–æ—î —Å–ª–æ–≤–æ –±—É–¥–µ –π–æ–≥–æ –ª—ñ–∫–∞–º–∏.",
        "–í—ñ–Ω –º—Ä—ñ—è—Ç–∏–º–µ –ø—Ä–æ —Ç–≤–æ—ó –æ–±—ñ–π–º–∏, —á–∏—Ç–∞—é—á–∏ —Ç–≤–æ—ó –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.",
        "–¢–≤–æ—î ¬´—Ç–æ–∂–µ —Ä–∞–¥–∞¬ª —Å—å–æ–≥–æ–¥–Ω—ñ –∑–º—ñ–Ω–∏—Ç—å –π–æ–≥–æ –ø–æ–≥–ª—è–¥.",
        "–í—ñ–Ω –º—Ä—ñ—è—Ç–∏–º–µ –ø—Ä–æ –∑—É—Å—Ç—Ä—ñ—á, —á–∏—Ç–∞—é—á–∏ —Ç–≤–æ—î ¬´—á–µ–∫–∞—é¬ª.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤–æ—ó —Å–ª–æ–≤–∞ —Å—å–æ–≥–æ–¥–Ω—ñ —Å—Ç–∞–Ω—É—Ç—å –π–æ–≥–æ –º—É–∑–∏–∫–æ—é.",
        "–Ø–∫—â–æ —Å–∫–∞–∂–µ—à ¬´—è –∑ —Ç–æ–±–æ—é¬ª, –≤—ñ–Ω –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ —Ä–µ–≤–Ω—É–≤–∞—Ç–∏.",
        "–Ø–∫—â–æ –Ω–∞–≥–∞–¥–∞—î—à –ø—Ä–æ —Ö—Ä–∏–∑–∞–Ω—Ç–µ–º–∏ ‚Äî –≤—ñ–Ω –∑–≥–∞–¥–∞—î —Ç—ñ–ª—å–∫–∏ —Ç–µ–±–µ.",
        "–¢–≤–æ—î ¬´—Ç–æ–∂–µ —á–µ–∫–∞—é –ø–æ–±–∞—á–µ–Ω–Ω—è¬ª —Å—Ç–∞–Ω–µ –π–æ–≥–æ –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è–º.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Å—å–æ–≥–æ–¥–Ω—ñ —Ç–≤—ñ–π –Ω–∞—Ç—è–∫ –±—É–¥–µ –π–æ–≥–æ –ø–ª–∞–Ω–æ–º.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Å—å–æ–≥–æ–¥–Ω—ñ —Ç–≤—ñ–π –Ω–∞—Ç—è–∫ —Å—Ç–∞–Ω–µ –π–æ–≥–æ –º—Ä—ñ—î—é.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤–æ—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –±—É–¥–µ –π–æ–≥–æ –æ–±—ñ–π–º–∞–º–∏.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤–æ—è –ø—Ä–∏—Å—É—Ç–Ω—ñ—Å—Ç—å –Ω–∞–≤—ñ—Ç—å —É —Å–ª–æ–≤–∞—Ö —Å—Ç–∞–Ω–µ –π–æ–≥–æ —â–∞—Å—Ç—è–º.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤–æ—î ¬´—Ç–æ–∂–µ —Ö–æ—á—É –±–ª–∏–∂—á–µ¬ª —Å—Ç–∞–Ω–µ –π–æ–≥–æ –≥–æ–ª–æ–≤–Ω–æ—é –º—Ä—ñ—î—é.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤—ñ–π –≥–æ–ª–æ—Å –±—É–¥–µ –¥–ª—è –Ω—å–æ–≥–æ, —è–∫ –ø–æ—Ü—ñ–ª—É–Ω–æ–∫ —É —à–∏—é.",
        "–¢–≤–æ—î —Ñ–æ—Ç–æ –≤ —Å–≤—ñ—Ç–ª—ñ –ª–∞–º–ø–∏ –∑–º—É—Å–∏—Ç—å –π–æ–≥–æ –º—Ä—ñ—è—Ç–∏ –ø—Ä–æ —Ç–≤–æ—ó –æ–±—ñ–π–º–∏.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤–æ—ó —Å–ª–æ–≤–∞ —Å—å–æ–≥–æ–¥–Ω—ñ –±—É–¥—É—Ç—å –π–æ–≥–æ –µ—Ä–æ—Ç–∏—á–Ω–æ—é —Ñ–∞–Ω—Ç–∞–∑—ñ—î—é.",
        "–¢–≤–æ—î —Ñ–æ—Ç–æ –∑ —É—Å–º—ñ—à–∫–æ—é —Å—Ç–∞–Ω–µ –¥–ª—è –Ω—å–æ–≥–æ –Ω–µ–±–µ–∑–ø–µ—á–Ω—ñ—à–∏–º –∑–∞ –±—É–¥—å-—è–∫–∏–π –Ω–∞—Ç—è–∫.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤–æ—è –Ω—ñ–∂–Ω—ñ—Å—Ç—å —Å—å–æ–≥–æ–¥–Ω—ñ —Ä–æ–∑–±—É–¥–∏—Ç—å –π–æ–≥–æ –±–∞–∂–∞–Ω–Ω—è.",
        "–¢–≤–æ—î —Ñ–æ—Ç–æ –æ—á–µ–π –∑—Ä–æ–±–∏—Ç—å –π–æ–≥–æ —Å–µ—Ä—Ü–µ –≥–∞—Ä—è—á–∏–º.",
        "–¢–≤–æ—î —Ñ–æ—Ç–æ –≤ –¥–∑–µ—Ä–∫–∞–ª—ñ —Å—Ç–∞–Ω–µ –π–æ–≥–æ –Ω—ñ—á–Ω–æ—é —Ñ–∞–Ω—Ç–∞–∑—ñ—î—é.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤—ñ–π –ø–æ–¥–∏—Ö —É—è–≤–Ω–æ –±—É–¥–µ –π–æ–≥–æ —Å–ø–æ–∫–æ—î–º.",
        "–Ø–∫—â–æ —Å–∫–∞–∂–µ—à ¬´—è —Ö–æ—á—É —Ç–µ–±–µ –ø–æ—Ä—É—á¬ª ‚Äî –≤—ñ–Ω –∑–ª–∞–º–∞—î—Ç—å—Å—è –≤—ñ–¥ –±–∞–∂–∞–Ω–Ω—è.",
        "–¢–≤–æ—î ¬´—Ç–æ–∂–µ —Ö–æ—á—É —Ç—Ä–∏–º–∞—Ç–∏ —Ç–≤–æ—é —Ä—É–∫—É¬ª —Å—Ç–∞–Ω–µ –π–æ–≥–æ –µ—Ä–æ—Ç–∏—á–Ω–∏–º —Å–Ω–æ–º.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤–æ—ó —Å–ª–æ–≤–∞ —Å—å–æ–≥–æ–¥–Ω—ñ –∑–∞–ª–∏—à–∞—Ç—å –π–æ–≥–æ –±–µ–∑ —Å–Ω—É.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤–æ—è —É—Å–º—ñ—à–∫–∞ –±—É–¥–µ –π–æ–≥–æ –∑–±—É–¥–∂–µ–Ω–Ω—è–º.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤—ñ–π –Ω–∞—Ç—è–∫ –±—É–¥–µ –π–æ–≥–æ –æ—Ä–≥–∞–∑–º–æ–º –¥—É–º–æ–∫.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤–æ—è –Ω—ñ–∂–Ω—ñ—Å—Ç—å —Ä–æ–∑—Ç–æ–ø–∏—Ç—å –π–æ–≥–æ —Ç—Ä–∏–≤–æ–≥—É.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤—ñ–π —à–µ–ø—ñ—Ç —É—è–≤–Ω–æ –±—É–¥–µ –π–æ–≥–æ –Ω–∞–π–∫—Ä–∞—â–∏–º —Å–Ω–æ–º.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤–æ—è –ø—Ä–∏—Å—É—Ç–Ω—ñ—Å—Ç—å –Ω–∞–≤—ñ—Ç—å —É —Å–ª–æ–≤–∞—Ö –∑—Ä–æ–±–∏—Ç—å –π–æ–≥–æ –≥–∞—Ä—è—á–∏–º.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤–æ—ó –æ—á—ñ —Å—å–æ–≥–æ–¥–Ω—ñ –±—É–¥—É—Ç—å –π–æ–≥–æ –ø–∞—Å—Ç–∫–æ—é.",
        "–¢–≤–æ—î —Ñ–æ—Ç–æ —Å–∏–ª—É–µ—Ç—É —Å—Ç–∞–Ω–µ –π–æ–≥–æ –µ—Ä–æ—Ç–∏—á–Ω–∏–º —Å–∏–º–≤–æ–ª–æ–º.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤—ñ–π –ª–µ–≥–∫–∏–π –Ω–∞—Ç—è–∫ –±—É–¥–µ –π–æ–≥–æ –±–µ–∑—É–º—Å—Ç–≤–æ–º.",
        "–Ø–∫—â–æ —Å–∫–∞–∂–µ—à ¬´—Ç–∏ –º—ñ–π —Å–ø–æ–∫—ñ–π —ñ –º–æ—î –±–∞–∂–∞–Ω–Ω—è¬ª ‚Äî –≤—ñ–Ω –Ω–µ –≤–∏—Ç—Ä–∏–º–∞—î.",
        "–ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è: —Ç–≤—ñ–π —Å–º—ñ—Ö —Å—å–æ–≥–æ–¥–Ω—ñ –±—É–¥–µ –¥–ª—è –Ω—å–æ–≥–æ –Ω–∞–π—Å–æ–ª–æ–¥—à–∏–º –¥–æ—Ç–∏–∫–æ–º.",
      ];

      const SPICY_PASS = 'banan';

      // –ö–ª—é—á—ñ localStorage
      const K_TS = 'fortune_ts';
      const K_TEXT = 'fortune_text';
      const K_USED_SPICY = 'fortune_used_spicy';
      const K_UNLOCKED = 'fortune_unlocked';

      // –Ü–Ω—Ç–µ—Ä–≤–∞–ª (—Ç–µ—Å—Ç–æ–≤–∏–π ‚Äî 60 —Å–µ–∫)
      const ONE_HOUR = 30 * 1000;

      const now = () => Date.now();
      const pad = n => String(n).padStart(2, '0');
      const fmtHMS = ms => { if (ms < 0) ms = 0; const s = Math.floor(ms / 1000); const h = Math.floor(s / 3600); const m = Math.floor((s % 3600) / 60); const ss = s % 60; return h > 0 ? `${pad(h)}:${pad(m)}:${pad(ss)}` : `${pad(m)}:${pad(ss)}`; };
      const leftMs = () => ONE_HOUR - (now() - Number(localStorage.getItem(K_TS) || 0));

      const isUnlocked = () => localStorage.getItem(K_UNLOCKED) === 'true';
      const setUnlocked = v => localStorage.setItem(K_UNLOCKED, v ? 'true' : 'false');

      function setStatus(ready, left) {
        DOT.classList.toggle('wait', !ready);
        STATUS.textContent = ready ? '–ú–æ–∂–Ω–∞ –∫–ª—ñ–∫–∞—Ç—å' : '–ó–∞—á–µ–∫–∞–π –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ä–∞–∑—É';
        NEXT.textContent = ready ? '‚Äî' : `–ß–µ—Ä–µ–∑ ${fmtHMS(left)}`;
      }
      function setLockedUI() {
        DOT.classList.add('wait');
        STATUS.textContent = '–ó–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ';
        NEXT.textContent = '‚Äî';
        modeChip.textContent = '–†–µ–∂–∏–º: –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ';
      }
      function setUnlockedUI() { modeChip.textContent = '–†–µ–∂–∏–º: —Ä–æ–∑–±–ª–æ–∫–æ–≤–∞–Ω–æ'; }

      let tickerId = null;
      function startTicker() {
        stopTicker();
        if (!isUnlocked()) { setLockedUI(); return; }
        const tick = () => {
          const l = leftMs();
          const ok = l <= 0;
          setStatus(ok, l);
          if (ok) stopTicker(); else tickerId = requestAnimationFrame(tick);
        };
        tickerId = requestAnimationFrame(tick);
      }
      function stopTicker() { if (tickerId) cancelAnimationFrame(tickerId), tickerId = null; }
      function lockForHour() { localStorage.setItem(K_TS, String(now())); startTicker(); }

      function showToast(msg) {
        TOAST.textContent = msg;
        TOAST.classList.add('show');
        clearTimeout(showToast._t);
        showToast._t = setTimeout(() => TOAST.classList.remove('show'), 2500);
      }

      // ======= –£–¢–ò–õ–Ü–¢–ò –ü–£–õ–£ =======
      function getUsed(key) { try { return JSON.parse(localStorage.getItem(key) || '[]') } catch { return [] } }
      function setUsed(key, arr) { localStorage.setItem(key, JSON.stringify(arr)) }
      function remainingCount(list, key) { const used = getUsed(key); return Math.max(0, list.length - Math.min(list.length, used.length)); }
      function pickIndexNonRepeating(list, key) {
        let used = getUsed(key);
        if (used.length >= list.length) used = [];
        const avail = list.map((_, i) => i).filter(i => !used.includes(i));
        const idx = avail[(Math.random() * avail.length) | 0];
        used.push(idx); setUsed(key, used); return idx;
      }

      function totalRemainingNow() {
        return isUnlocked() ? remainingCount(PRED_SPICY, K_USED_SPICY) : 0;
      }
      function updateCountUI() { countEl.textContent = '–ó–∞–ª–∏—à–∏–ª–æ—Å—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å: ' + totalRemainingNow(); }

      function chooseFortune() {
        // –ü—Ä–∞—Ü—é—î–º–æ —Ç—ñ–ª—å–∫–∏ –∑ PRED_SPICY
        // –Ø–∫—â–æ –≤–∏—á–µ—Ä–ø–∞–Ω–æ ‚Äî –æ–±–Ω—É–ª—è—î–º–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ
        if (remainingCount(PRED_SPICY, K_USED_SPICY) === 0) setUsed(K_USED_SPICY, []);
        const idx = pickIndexNonRepeating(PRED_SPICY, K_USED_SPICY);
        return '‚ù§Ô∏è' + PRED_SPICY[idx];
      }

      async function typeText(el, text) {
        el.classList.remove('revealed');
        el.textContent = '';
        const base = 10, jitter = 35;
        for (let i = 0; i < text.length; i++) {
          el.textContent += text[i];
          await new Promise(r => setTimeout(r, base + Math.random() * jitter));
        }
        el.classList.add('revealed');
      }

      function cocoaConfetti() {
        const W = FX.width = innerWidth, H = FX.height = innerHeight;
        const N = 140, colors = ['#7b4b3a', '#a06b55', '#c79275', '#e9c2aa'];
        const parts = Array.from({ length: N }, () => ({
          x: Math.random() * W, y: -20 - Math.random() * H * .2,
          vx: (Math.random() - .5) * 1.5, vy: 1.8 + Math.random() * 2.8,
          w: 6 + Math.random() * 10, h: 2 + Math.random() * 6,
          rot: Math.random() * Math.PI * 2, vrot: (Math.random() - .5) * .15,
          color: colors[(Math.random() * colors.length) | 0], round: Math.random() < .5
        }));
        let t = 0;
        (function tick() {
          ctx.clearRect(0, 0, W, H);
          for (const p of parts) {
            p.x += p.vx; p.y += p.vy; p.rot += p.vrot;
            ctx.save(); ctx.translate(p.x, p.y); ctx.rotate(p.rot);
            ctx.fillStyle = p.color;
            p.round ? (ctx.beginPath(), ctx.ellipse(0, 0, p.w / 2, p.h / 2, 0, 0, Math.PI * 2), ctx.fill())
              : ctx.fillRect(-p.w / 2, -p.h / 2, p.w, p.h);
            ctx.restore();
          }
          if (++t < 200) requestAnimationFrame(tick); else ctx.clearRect(0, 0, W, H);
        })();
      }

      function sparkles() {
        const W = SP.width = innerWidth, H = SP.height = innerHeight; const S = 40;
        const dots = Array.from({ length: S }, () => ({
          x: Math.random() * W, y: Math.random() * H, r: Math.random() * 1.8 + 0.6,
          a: Math.random() * Math.PI * 2, v: .004 + .004 * Math.random()
        }));
        (function loop() {
          spx.clearRect(0, 0, W, H);
          for (const d of dots) {
            d.a += d.v; const tw = 0.6 + 0.4 * Math.sin(d.a * 3);
            spx.globalAlpha = tw; spx.fillStyle = '#a06b55';
            spx.beginPath(); spx.arc(d.x + Math.sin(d.a) * 6, d.y + Math.cos(d.a) * 6, d.r, 0, Math.PI * 2); spx.fill();
          }
          requestAnimationFrame(loop);
        })();
      }

      // –ú–æ–¥–∞–ª –ø–∞—Ä–æ–ª—é
      function openPass() { modal.classList.add('show'); passInput.value = ''; passInput.focus(); }
      function closePass() { modal.classList.remove('show'); }
      lockBtn.addEventListener('click', openPass);
      passCancel.addEventListener('click', closePass);
      passOk.addEventListener('click', () => {
        const ok = passInput.value === SPICY_PASS;
        if (ok) {
          setUnlocked(true);
          setUnlockedUI();
          updateCountUI();
          showToast('–†–æ–∑–±–ª–æ–∫–æ–≤–∞–Ω–æ');
          closePass();
          startTicker();
        } else {
          showToast('–•–∏–±–Ω–∏–π –ø–∞—Ä–æ–ª—å');
        }
      });

      // –ö–Ω–æ–ø–∫–∞ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è (–∫–æ–ø—ñ—é—î —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π —Ç–µ–∫—Å—Ç)
      copyBtn.addEventListener('click', async () => {
        try {
          await navigator.clipboard.writeText('—Ç–∏ –º–µ–Ω—ñ –ø–æ–¥–æ–±–∞—î—à—å—Å—è');
          showToast('–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ: ' + FORTUNE.textContent);
        } catch (e) {
          showToast('–ù–µ –≤–¥–∞–ª–æ—Å—è —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏');
        }
      });

      // –†—ñ–ø–ª –Ω–∞ –∫–Ω–æ–ø—Ü—ñ
      BTN.addEventListener('pointermove', (e) => {
        const r = BTN.getBoundingClientRect();
        BTN.style.setProperty('--x', (e.clientX - r.left) + 'px');
        BTN.style.setProperty('--y', (e.clientY - r.top) + 'px');
      });

      function saveFortuneText(text) { localStorage.setItem(K_TEXT, text) }

      // –û—Å–Ω–æ–≤–Ω–∞ –∫–Ω–æ–ø–∫–∞
      BTN.addEventListener('click', async () => {
        if (!isUnlocked()) { showToast('–°–ø–æ—á–∞—Ç–∫—É –≤–≤–µ–¥–∏ –ø–∞—Ä–æ–ª—å'); openPass(); return; }

        const left = leftMs();
        if (left > 0) { showToast(`–©–µ —Ç—Ä–æ—Ö–∏ —Ç–µ—Ä–ø—ñ–Ω–Ω—è ‚Äî —á–µ—Ä–µ–∑ ${fmtHMS(left)}`); startTicker(); return; }
        localStorage.setItem(K_TS, String(now()));
        startTicker();

        const text = chooseFortune();
        await typeText(FORTUNE, text);
        cocoaConfetti();
        saveFortuneText(text);

        updateCountUI();
      });

      // –Ü–Ω—ñ—Ç
      (function restore() {
        sparkles();
        if (isUnlocked()) setUnlockedUI(); else setLockedUI();
        updateCountUI();
        startTicker();
      })();

    })();
  </script>
</body>

</html>